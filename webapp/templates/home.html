{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Date and Time Section -->
    <div class="text-left mb-4">
        <h1>Bank Stock Prediction</h1>
        <p id="currentDateTime" class="text-muted">As of <span id="liveDateTime"></span></p>
        
        <!-- Form to select bank and model -->
        <form method="get" action="/">
            <div class="form-group">
                <label for="bank">Select Bank:</label>
                <select name="bank" id="bank" class="form-control" onchange="this.form.submit()">
                    <option value="NABIL" {% if bank == "NABIL" %}selected{% endif %}>NABIL</option>
                    <option value="ALICL" {% if bank == "ALICL" %}selected{% endif %}>ALICL</option>
                    <option value="BPCL" {% if bank == "BPCL" %}selected{% endif %}>BPCL</option>
                    <option value="CFCL" {% if bank == "CFCL" %}selected{% endif %}>CFCL</option>
                    <option value="CIT" {% if bank == "CIT" %}selected{% endif %}>CIT</option>
                    <option value="EDBL" {% if bank == "EDBL" %}selected{% endif %}>EDBL</option>
                    <option value="SHL" {% if bank == "SHL" %}selected{% endif %}>SHL</option>
                </select>
            </div>
            <div class="form-group">
                <label for="model">Select Model:</label>
                <select name="model" id="model" class="form-control" onchange="this.form.submit()">
                    <option value="GCN" {% if model == "GCN" %}selected{% endif %}>GCN</option>
                    <option value="GAT" {% if model == "GAT" %}selected{% endif %}>GAT</option>
                </select>
            </div>
        </form>
    </div>

    <!-- Legend for Graph Colors -->
    <div class="text-center mb-4">
        <p class="text-muted">Blue: Ground Truth | Orange: Predicted Values</p>
    </div>

    <!-- Prediction Graphs -->
    <div class="row">
        <div class="col-md-12">
            <!-- Loop through each graph HTML -->
            {% for graph_html in graphs %}
            <div class="graph-container mb-4" style="width: 100%; height: auto;">
                {{ graph_html | safe }}
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Include custom JavaScript -->
<script src="{{ url_for('static', path='scripts.js') }}"></script>
{% endblock %}